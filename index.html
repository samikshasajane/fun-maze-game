<html>

<head>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src='Box2dWeb.min.js'></script>
    <script src="Three.js"></script>
    <script src="keyboard.js"></script>
    <script src="jquery.js"></script>
    <script src="maze.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />


    
</head>

<body>

    <div id='instructions'>
        How to play Astray:
        <br><br>
        Use the arrow keys to move the ball and find the exit to the maze.
        <br><br>
        Vim trainees: h, j, k, l
        <br><br>
        If Ball hits wall for more than 3 times then , game will over.
    </div>

    <div id='help'>
        Hold down the 'I' key for instructions.
    </div>

    <div id='level'>Level 1</div>

    <div id='score'></div>

    <!-- keys for mobile ipad -->
    <!-- <div class="arrow-keys">
        <button><i class="fa fa-arrow-left"></i></button>
        <button><i class="fa fa-arrow-right"></i></button>
        <button><i class="fa fa-arrow-up"></i></button>
        <button><i class="fa-solid fa-arrow-down"></i></i></button>

    </div> -->

    <!-- View Profile popup start -->
    <div class="view-profile index">
        <button id="myBtn">
            <p id="user-initial"></p>
        </button>
    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="profile-icon text-center">
                <button>
                    <p id="user-initial1"></p>
                </button>
            </div>
            <h5 id="username" class="text-center"></h5>
            <p id="useremail" class="text-center"></p>
            <p class="text-center">Highest Score : <span id="hightscore"></span></p>
            <div class="logout text-center">
                <button id="logout-btn">LOGOUT</button>
            </div>
        </div>
    </div>
    <!-- View Profile popup ends -->


     <!-- Game over popup start -->
     <div id="myModal1" class="modal1" style="display: none;">
        <!-- Modal content -->
        <div class="modal-content1">
           <!-- <h4>Game Over</h4> -->
           <img src="images/over.gif"> 
        </div>
    </div>
     <!-- Game over popup ends -->


    <div id="myModal2" class="modal2" style="display: none;">
        <!-- Modal content -->
        <div class="modal-content2">
            <img src="images/over.gif"> 
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-analytics.js";
        import { getDatabase, ref, set, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyD9PHphMpgi2LFUjqpiRBTude45NzzZ__M",
          authDomain: "fun-maze.firebaseapp.com",
          databaseURL: "https://fun-maze-default-rtdb.firebaseio.com",
          projectId: "fun-maze",
          storageBucket: "fun-maze.appspot.com",
          messagingSenderId: "305335812367",
          appId: "1:305335812367:web:12245096e0110b59a67e7a",
          measurementId: "G-T4RD8QBK0X"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

    //     saveData.addEventListener('click',(e) => {
    // var username = document.getElementById('username').value;
    // var email = document.getElementById('email').value;
    // var password = document.getElementById('password').value;

    // set(ref(database, 'users/' + username), {

    //  username: username,
    //  email: email,
    //  password : password

    //  });

    // alert('saved');
    // });

    firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
        user.providerData.forEach((profile) => {
            console.log("  Provider-specific UID: " + profile.uid);
            console.log("  Name: " + profile.displayName);
            console.log("  Email: " + profile.email);
            console.log("  Photo URL: " + profile.photoURL);
            //console.log(profile)
                  
            // document.getElementById("user-initial").innerHTML = profile.displayName.charAt(0);
            // document.getElementById("user-initial1").innerHTML = profile.displayName.charAt(0);
            // document.getElementById("username").innerHTML = profile.displayName;
            // document.getElementById("useremail").innerHTML = profile.email;
        })
       // document.getElementById("hightscore").innerHTML = localStorage.getItem('Highscore');

    }
})

function writeuserdata(userId , name,email,scores){
const db = getDatabase();
const reference = ref(db, 'users/' + userId);
set(reference , {
    Username : name,
    Useremail:email,
    Score : scores
});
}

writeuserdata("sam" , "samiksha" , "ss@gmail.com" , "55");
        


</script>

   <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>\
   <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.2/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-analytics.js"></script>
    <script src='firebase.js'></script>
    <script src="index.js"></script>
</body>

</html>